<!-- Overlay for blur effect (initially hidden) --> 
<div id="overlay" class="fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm z-40 hidden"></div>

<!-- Customer Service Floating Button --> 
<div class="fixed bottom-6 right-6 z-50"> 
  <!-- Main Button --> 
  <button id="cs-button" class="bg-yellow-600 text-black rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300"> 
    <i class="fas fa-comments text-xl"></i> 
  </button>

  <!-- Chat Window Modal (Initially Hidden) -->
  <div id="chat-window" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 hidden">
    <div class="w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden max-h-[90vh] md:max-h-[80vh]">
      <!-- Scroll container for chat content -->
      <div class="modal-scroll-container overflow-y-auto max-h-[90vh] md:max-h-[80vh]">
        <!-- Chat Header --> 
        <div class="bg-navy text-white p-4 flex justify-between items-center">
          <div class="flex items-center"> 
            <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div> 
            <span class="font-hedvig">Customer Support</span> 
          </div> 
          <div class="flex space-x-2"> 
            <button id="minimize-chat" class="hover:text-gray-300 transition"> 
              <i class="fas fa-minus text-xs"></i> 
            </button> 
            <button id="close-chat" class="hover:text-gray-300 transition"> 
              <i class="fas fa-times"></i> 
            </button> 
          </div> 
        </div>

        <!-- Add this right after the chat window div --> 
        <input type="hidden" id="user-id" value="<?php echo isset($_SESSION['user_id']) ? $_SESSION['user_id'] : ''; ?>">

        <!-- Chat Messages --> 
        <div id="chat-messages" class="p-4 sm:h-80 h-[calc(100%-116px)] overflow-y-auto space-y-3 bg-cream"> 
          <div class="flex items-start"> 
            <div class="bg-gray-200 rounded-lg p-3 max-w-[80%]"> 
              <p class="text-sm text-navy">Hello, welcome to GrievEase customer support. How can I assist you today?</p> 
            </div> 
          </div> 
        </div>

        <!-- Chat Input --> 
        <div class="p-4 border-t border-gray-200 bg-white"> 
          <div class="flex">
            <input type="text" id="chat-input" placeholder="Type your message..." class="flex-1 p-3 border border-input-border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-yellow-600">
            <button id="send-message" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 rounded-r-lg transition-all duration-300"> 
              <i class="fas fa-paper-plane"></i> 
            </button> 
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Branch Selection Modal (Initially Hidden) --> 
<div id="branch-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 hidden">
  <div class="w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden">
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-hedvig text-navy">Select Branch Location</h3>
        <button class="closeBranchModal text-gray-500 hover:text-navy">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>

      <div id="branch-options" class="space-y-3 mt-4"> 
        <!-- Branch options will be dynamically inserted here --> 
        <div class="text-center py-4"> 
          <i class="fas fa-spinner fa-spin text-yellow-600"></i>
          <p class="mt-2 text-navy">Loading branches...</p>
        </div> 
      </div>
      
      <button class="mt-6 w-full bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg shadow-md transition-all duration-300">
        Confirm Selection
      </button>
    </div>
  </div>
</div>